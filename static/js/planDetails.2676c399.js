(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["planDetails"],{1623:function(t,a,s){"use strict";var e=s("5064"),n=s.n(e);n.a},"2c92":function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return t.isWechat?t._e():s("div",{staticClass:"header"},[s("div",{staticClass:"header_body"},[s("span",{staticClass:"goBack",on:{click:t.goBack}},[s("van-icon",{attrs:{name:"arrow-left"}})],1),s("div",{staticClass:"flex-vertical-centering"},[s("p",{staticClass:"textEllipsis",on:{click:t.showLog}},[t._v("\n        "+t._s(t.headerName)+"\n      ")])]),t.shareShow?s("span",{staticClass:"shareSheet",on:{click:t.shareSheet}},[t._v("分享")]):t._e()])])},n=[],i={name:"TopMsg",props:{headerName:{type:String,default:""},required:{type:Boolean,default:!0},shareShow:{type:Boolean,default:!1}},data:function(){return{clickNum:0}},computed:{isWechat:function(){return this.$store.state.isWechat}},watch:{$route:function(){this.clickNum=0}},created:function(){},methods:{goBack:function(){var t=this;t.$router.go(-1)},shareSheet:function(){this.$emit("shareSheet")},showLog:function(){if(this.clickNum++,5===this.clickNum){this.clickNum=0;var t=document.getElementsByClassName("vc-switch")[0],a=window.getComputedStyle(t,null).getPropertyValue("display");"block"===a?VCONSOLE.hide():VCONSOLE.show()}}}},l=i,o=(s("9243"),s("2877")),c=Object(o["a"])(l,e,n,!1,null,"2cd8e979",null);a["a"]=c.exports},5064:function(t,a,s){},"8c64":function(t,a,s){},9243:function(t,a,s){"use strict";var e=s("8c64"),n=s.n(e);n.a},e688:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"plan-details-page"},[s("top-msg",{attrs:{"header-name":"计划详情"}}),s("div",{staticClass:"page-box"},[s("div",{staticClass:"top"},[s("ul",{staticClass:"list"},[s("li",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("\n            已消费总金额\n          ")]),s("div",{staticClass:"price"},[t._v("\n            "+t._s(t.details.consumed_amount)+"元\n          ")])]),s("li",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("\n            已还款总金额\n          ")]),s("div",{staticClass:"price"},[t._v("\n            "+t._s(t.details.paid_amount)+"元\n          ")])]),s("li",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("\n            还款金金额\n          ")]),s("div",{staticClass:"price"},[t._v("\n            "+t._s(t.details.remained_amount)+"元\n          ")])])]),s("div",{staticClass:"tips"},[t._v("\n        温馨提示：点击继续执行可以在原来的基础上继续执行此还款\n        计划，你必须在计划中断4小时以内才可以点继续执行\n      ")])]),s("ul",{staticClass:"list-box"},t._l(t.details.bills,(function(a,e){return s("li",{key:e,staticClass:"item"},[s("div",{staticClass:"title clear"},[s("span",{staticClass:"date lt"},[t._v("日期 "+t._s(a.plan_bill_info.plan_executed_time))]),s("span",{class:{"rt status":!0,status1:"WAITING"===a.plan_bill_info.execute_state}},[t._v(t._s(t._f("executeStateFilter")(a.plan_bill_info.execute_state)))])]),s("div",{staticClass:"intro flex-row-between"},[s("span",{staticClass:"lt text flex-row-center"},[s("i",{class:["iconfont","CONSUME"===a.plan_bill_info.bill_type?"icon-xiaofei colorED0":"icon-huankuan maincolor"]}),t._v("\n            "+t._s("CONSUME"===a.plan_bill_info.bill_type?"消费账单":"还款账单")+"\n          ")]),s("span",{staticClass:"rt price"},[t._v(t._s(a.plan_bill_info.sum_amount)+"元")])])])})),0),t.details.repay_plan_info&&["SUCCESS","EXECUTING","WAITING","EXCEPTION","FAILED"].indexOf(t.details.repay_plan_info.repay_plan_info.execute_state)>=0?s("div",{staticClass:"add-btn"},[t.details.repay_plan_info&&["EXECUTING","WAITING"].indexOf(t.details.repay_plan_info.repay_plan_info.execute_state)>=0?s("span",{staticClass:"btn",on:{click:t.termination}},[t._v("终止执行")]):t._e(),t.details.repay_plan_info&&"EXCEPTION"===t.details.repay_plan_info.repay_plan_info.execute_state?s("span",{staticClass:"btn continue",on:{click:t.continueFun}},[t._v("继续执行")]):t._e(),t.details.repay_plan_info&&"FAILED"===t.details.repay_plan_info.repay_plan_info.execute_state&&"PENDING"===t.showConfirmMsg.repay_state?s("span",{staticClass:"btn propose",on:{click:t.propose}},[t._v("提出还款金")]):t.details.repay_plan_info&&["SUCCESS","FAILED"].indexOf(t.details.repay_plan_info.repay_plan_info.execute_state)>=0?s("span",{staticClass:"btn",on:{click:t.confirmDel}},[t._v("删除计划")]):t._e()]):t._e(),s("van-popup",{staticClass:"confirm-pop",model:{value:t.showConfirm,callback:function(a){t.showConfirm=a},expression:"showConfirm"}},[s("div",{staticClass:"title"},[t._v("\n        提示\n      ")]),s("ul",{staticClass:"list"},[s("li",{staticClass:"clear item"},[s("span",{staticClass:"lt text"},[t._v("还款金额")]),s("span",{staticClass:"rt text dec"},[t._v(t._s(t.showConfirmMsg.amount)+"元")])]),s("li",{staticClass:"clear item"},[s("span",{staticClass:"lt text"},[t._v("手续费")]),s("span",{staticClass:"rt text dec"},[t._v(t._s(t.showConfirmMsg.single_repay_fee)+"元/笔")])]),s("li",{staticClass:"clear item"},[s("span",{staticClass:"lt text"},[t._v("还款到")]),s("span",{staticClass:"rt text dec"},[t._v(t._s(t.details.repay_plan_info&&t.details.repay_plan_info.bank_name)+"（"+t._s(t.details.repay_plan_info&&t.details.repay_plan_info.repay_plan_info.bank_card_no.substr(-4,4))+"）")])])]),s("div",{staticClass:"btn-box clear"},[s("span",{staticClass:"btn lt",on:{click:function(a){t.showConfirm=!1}}},[t._v("返回")]),s("span",{staticClass:"btn rt confirm",on:{click:t.confirmRepay}},[t._v("确定还款")])])])],1)],1)},n=[],i=s("2c92"),l={name:"PlanDetails",components:{topMsg:i["a"]},filters:{executeStateFilter:function(t){return{WAITING:"等待执行",EXECUTING:"执行中",EXCEPTION:"执行异常",SUCCESS:"执行成功",FAILED:"执行失败"}[t]}},data:function(){return{id:this.$route.query.id,details:{},showConfirm:!1,showConfirmMsg:{}}},created:function(){document.title="计划详情",this.planDetailFun()},methods:{getSinglePlanFun:function(){var t=this;this.$api.repay.getSinglePlan({planTradeNo:this.id}).then((function(a){console.log(a),t.showConfirmMsg=a.data.data}))},planDetailFun:function(){var t=this;this.$api.plan.planDetail(this.id).then((function(a){console.log(a.data.data),t.details=a.data.data,"FAILED"===t.details.repay_plan_info.repay_plan_info.execute_state&&t.getSinglePlanFun()}))},continueFun:function(){},propose:function(){this.showConfirm=!0},termination:function(){var t=this;this.$dialog({title:"提示",message:"账单将终止执行",confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){t.$api.plan.stopRepayPlan(t.id).then((function(a){"200000"===a.data.code&&(t.$toast.success("终止成功"),t.planDetailFun())}))}))},confirmRepay:function(){var t=this;this.$api.repay.manualRepay({payback_bank_id:this.details.repay_plan_info.repay_plan_info.bank_card_id,plan_trade_no:this.id}).then((function(a){"200000"===a.data.code&&(t.showConfirm=!1,t.planDetailFun())}))},confirmDel:function(){var t=this;this.$dialog({title:"提示",message:"计划将删除",confirmButtonText:"确定",showCancelButton:!0,cancelButtonText:"取消"}).then((function(){t.$api.plan.deleteRepayPlan(t.id).then((function(a){t.$toast.success("删除成功"),t.$router.go(-1)}))}))}}},o=l,c=(s("1623"),s("2877")),r=Object(c["a"])(o,e,n,!1,null,"2b9cdbcd",null);a["default"]=r.exports}}]);